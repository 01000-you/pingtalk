# 내부 테스트 트랙 업로드 가이드

구글 플레이 콘솔의 내부 테스트 트랙에 앱을 업로드하는 상세 가이드입니다.

---

## 내부 테스트 트랙 업로드 절차

### 1. 내부 테스트 트랙 접근

1. Play Console → 앱 선택
2. 왼쪽 메뉴에서 **"테스트"** 또는 **"Testing"** 클릭
3. **"내부 테스트"** 또는 **"Internal testing"** 선택
4. **"새 버전 만들기"** 또는 **"Create new release"** 클릭

---

## 2. 모바일 앱 (App Bundle) 업로드

### 2.1 App Bundle 업로드

1. **"App Bundle 또는 APK"** 섹션에서
2. **"App Bundle 업로드"** 버튼 클릭
3. 파일 선택: `mobile/build/release/app/app-release.aab`
4. 업로드 완료 대기

---

## 3. Wear OS AAB 업로드

### 3.1 업로드 위치 찾기

내부 테스트 트랙에서도 Wear OS AAB를 업로드해야 합니다. **Google Play Store는 AAB 형식을 요구**하므로 AAB로 업로드합니다. 다음 위치를 확인하세요:

#### 방법 1: 기기별 App Bundle 섹션 (가장 일반적)

1. 모바일 앱 AAB를 업로드한 **같은 버전 페이지**에서
2. 아래로 스크롤하여 **"기기별 App Bundle"** 또는 **"Device targeting"** 섹션 찾기
3. **"Wear OS"** 또는 **"Wear"** 탭 클릭
4. **"App Bundle 업로드"** 버튼 클릭
5. 파일 선택: `mobile/build/release/wear/wear-release.aab`

#### 방법 2: 추가 App Bundle 섹션

1. 버전 페이지에서 **"추가 APK 또는 App Bundle 추가"** 섹션 확인
2. **"기기 유형별 App Bundle"** 또는 **"Device-specific App Bundle"** 옵션 클릭
3. **"Wear OS"** 선택
4. App Bundle 파일 업로드

#### 방법 3: 자동 인식 (applicationId가 동일한 경우)

- 모바일 앱과 워치 앱이 **동일한 applicationId** (`com.pingtalk.app`)를 사용하면
- 구글 플레이 콘솔이 자동으로 워치 앱을 인식할 수 있습니다
- 하지만 명시적으로 업로드하는 것이 권장됩니다

---

## 4. 업로드 확인

### 4.1 업로드 완료 확인

업로드 후 다음을 확인하세요:

1. **모바일 앱 AAB**
   - 버전 코드: 1
   - 버전 이름: 1.0.0
   - 상태: 업로드 완료

2. **Wear OS AAB**
   - 버전 코드: 1001 (모바일 versionCode + 1000 오프셋)
   - 버전 이름: 1.0.0 (모바일과 동일)
   - 상태: 업로드 완료
   - 기기 타겟: Wear OS
   - 형식: App Bundle (AAB)
   - **참고:** Play Console에서 모바일과 Wear OS가 별도 페이지로 관리되므로 버전 코드 충돌을 방지하기 위해 오프셋(1000)을 사용합니다.

### 4.2 applicationId 확인

**중요:** 두 앱이 동일한 `applicationId`를 사용하는지 확인:
- 모바일: `com.pingtalk.app`
- 워치: `com.pingtalk.app` (동일해야 함)

---

## 5. 출시 노트 입력

1. **"출시 노트"** 섹션에서
2. `docs/10-릴리즈노트-간결버전.md`의 내용 복사
3. 붙여넣기
4. 저장

---

## 6. 테스터 추가 및 출시

### 6.1 테스터 추가

1. **"테스터"** 또는 **"Testers"** 탭 클릭
2. **"테스터 추가"** 버튼 클릭
3. 이메일 주소 입력 또는 Google 그룹 선택
4. 저장

### 6.2 출시

1. 모든 항목이 완료되었는지 확인
2. **"검토"** 또는 **"Review"** 버튼 클릭
3. 검토 완료 후 **"출시"** 또는 **"Release"** 버튼 클릭

---

## 7. 문제 해결

### "Wear OS" 섹션이 보이지 않는 경우

1. **모바일 앱 AAB를 먼저 업로드**하세요
2. 업로드 완료 후 페이지를 **새로고침**하세요
3. **"기기별 App Bundle"** 또는 **"Device targeting"** 섹션을 찾아보세요
4. 페이지 하단까지 스크롤하여 확인하세요

### applicationId 불일치 오류

- 모바일과 워치 앱의 `applicationId`가 동일한지 확인
- `mobile/android/app/build.gradle.kts`: `applicationId = "com.pingtalk.app"`
- `mobile/android/wear/build.gradle.kts`: `applicationId = "com.pingtalk.app"`

### App Bundle 업로드 실패

- AAB 파일이 올바르게 서명되었는지 확인
- 파일 크기 확인 (약 4.5MB)
- 빌드가 성공적으로 완료되었는지 확인
- `./gradlew :wear:bundleRelease` 명령으로 AAB 빌드 확인

---

## 8. 체크리스트

내부 테스트 출시 전 확인사항:

- [ ] 모바일 앱 AAB 업로드 완료
- [ ] Wear OS AAB 업로드 완료 (APK가 아닌 AAB 형식)
- [ ] 두 앱의 applicationId가 동일한지 확인 (`com.pingtalk.app`)
- [ ] 출시 노트 입력 완료
- [ ] 테스터 추가 완료
- [ ] 검토 및 출시 완료

---

## 참고

- 내부 테스트는 빠른 승인(보통 몇 시간)이 가능합니다
- 테스터는 최대 100명까지 추가할 수 있습니다
- 내부 테스트에서 문제가 없으면 클로즈드 테스트 → 프로덕션 순서로 진행하세요

